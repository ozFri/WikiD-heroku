{% extends "layout.html" %}
{% block body %}
{% if session.username %}
<h3>Add a Statement</h3>
<form action="{{ url_for('add_I_Node') }}" method="post">
    <dl>
        <dt>Title:</dt>
        <dd><input type="text" size="30" name="title"></dd>
        <!--            <dt>Tags (separated by commas):</dt>
            <dd><input type="text" size="30" name="tags"></dd>
            <dt>Text:</dt>
            <dd><textarea name="text" rows="5" cols="40"></textarea></dd>-->
    </dl>
    <input type="submit" value="Share">
</form>
{% endif %}
<div class="post-header">
    <h2>
{% if "INode" in aifnode.type %}
        {{aifnode.title}}
{% endif %}
{% if "SNode" in aifnode.type %}
        <a class="aifnode-title" href="{{ url_for('aifNode', aifnode_id=aifnode.source_id)}}">{{ aifnode.source}}</a>
        {{ aifnode.schema }}  
        <a class="aifnode-title" href="{{ url_for('aifNode', aifnode_id=aifnode.target_id)}}">{{ aifnode.target}}</a>
{% endif %}
    </h2>
    {{aifnode.date}}
</div>
<p>
<div id="schemamenu-left">
    <form method="Post" action="{{ url_for('add_S_node',aifnode_id=aifnode.id) }}">
        <select name="source" id="fuzzDrop1">
            {% for row in aifnode.aifnodes %}
            <option value={{ loop.index }}>{{ row.aifnode.title }}</option> 
            {% endfor %}
        </select>
        <div id="fuzzSearch">
            <div id="fuzzNameContainer">
                <span class="fuzzName"></span>
                <span class="fuzzArrow"></span>
            </div>
            <div id="fuzzDropdownContainer">
                <input type="text" value="" class="fuzzMagicBox" placeholder="search.." />
                <span class="fuzzSearchIcon"></span>
                <ul id="fuzzResults">
                </ul>
            </div>
        </div>
        <select name="schema" class="schema-select">
            <option>supports</option>
            <option>opposes</option>
        </select>
        {{aifnode.title}}
        <input type="submit" class="SNode-submit" value="Submit">
    </form>
    <ul class="" >
        <h3>Supporting propositions</h3>
        {% for row in supporting_nodes %}
        <li>
            <a class="aifnode-title" href="{{ url_for('aifNode', aifnode_id=row.snode.source_id)}}">{{ row.snode.source}}</a>
            <a class="aifnode-title" href="{{ url_for('aifNode', aifnode_id=row.snode.id)}}">  {{ row.snode.schema }}  </a>
            {{ row.snode.target }}
        </li>
            {% endfor %}        
    </ul>
    <ul class="" >
        <h3>Opposing propositions</h3>
        {% for row in opposing_nodes %}
        <li>
            <a class="aifnode-title" href="{{ url_for('aifNode', aifnode_id=row.snode.source_id)}}">{{ row.snode.source }}</a>
            <a class="aifnode-title" href="{{ url_for('aifNode', aifnode_id=row.snode.id)}}">  {{ row.snode.schema }}  </a>
            {{ row.snode.target }}
        </li>
            {% endfor %}        
    </ul>
</div>

<div id="schemamenu-right">
    <form method="POST" action="{{ url_for('add_S_node',aifnode_id=aifnode.id) }}">
        {{aifnode.title}}
        <select name="schema" class="schema-select">
            <option>supports</option>
            <option>opposes</option>
        </select>
        <div>
            <select name="target" id="fuzzDrop2">
                {% for row in aifnode.aifnodes %}
                <option value={{loop.index}}>{{ row.aifnode.title }}</option> 
                {% endfor %}
            </select>
        </div><!-- or <a href="">add</a> a new statement
        <div id=""><input name ="new-target" type="text"></div>-->
        <div id="fuzzSearch2">
            <div id="fuzzNameContainer">
                <span class="fuzzName"></span>
                <span class="fuzzArrow"></span>
            </div>
            <div id="fuzzDropdownContainer">
                <input type="text" value="" class="fuzzMagicBox" placeholder="search.." />
                <span class="fuzzSearchIcon"></span>
                <ul id="fuzzResults">
                </ul>
            </div>
        </div>
        <input type="submit" value="Submit"class="SNode-submit">
    </form>
    <ul class="" >
        <h3>Supported propositions</h3>
        {% for row in supported_nodes %}
        <li>
            {{ row.snode.source}}
            <a class="aifnode-title" href="{{ url_for('aifNode', aifnode_id=row.snode.id)}}">  {{ row.snode.schema }}  </a>
            <a class="aifnode-title" href="{{ url_for('aifNode', aifnode_id=row.snode.target_id)}}">{{ row.snode.target}}</a>
        </li>
        {% endfor %}        
    </ul>
    <ul class="" >
        <h3>Opposed propositions</h3>
        {% for row in opposed_nodes %}
        <li>
            {{ row.snode.source}}
            <a class="aifnode-title" href="{{ url_for('aifNode', aifnode_id=row.snode.id)}}">{{ row.snode.title }}</a>
            <a class="aifnode-title" href="{{ url_for('aifNode', aifnode_id=row.snode.target_id)}}">{{ row.snode.target}}</a>
        </li>
        {% endfor %}        
    </ul>
</div>
<div class="votemenu">
    <h3>agreeing_with_this_statement: {{agree_votes}}</h3>
    <a href="{{ url_for('agree_with_aifnode', aifnode_id=aifnode.id)}}">agree</a><br>
    <h3>disagreeing_with_this_statement: {{disagree_votes}}</h3>
    <a href="{{ url_for('disagree_with_aifnode', aifnode_id=aifnode.id) }}">disagree</a><br>
    <h3>undecided_on_this_statement: {{undecided_votes}}</h3>
    <a href="{{ url_for('undecided_on_aifnode', aifnode_id=aifnode.id) }}">undecided</a><br>
</div>
</p>
<script>
    $('#fuzzDrop1').fuzzyDropdown({
        mainContainer: '#fuzzSearch',
        arrowUpClass: 'fuzzArrowUp',
        selectedClass: 'selected',
        enableBrowserDefaultScroll: true,
        highlightClass: 'highlight'
    });
    $('#fuzzDrop2').fuzzyDropdown({
        mainContainer: '#fuzzSearch2',
        arrowUpClass: 'fuzzArrowUp',
        selectedClass: 'selected',
        enableBrowserDefaultScroll: true,
        highlightClass: 'highlight'
    });
</script>


{% endblock %}
